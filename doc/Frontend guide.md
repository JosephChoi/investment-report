# 투자 관리 페이지 프론트엔드 기능명세서

## 1. 개요
- **프로젝트명:** 투자 관리 대시보드
- **프레임워크:** Next.js (App Router 사용)
- **스타일링:** Tailwind CSS
- **UI 컴포넌트:** 자체 구현 컴포넌트
- **차트 라이브러리:** Recharts
- **아이콘 라이브러리:** Lucide React
- **데이터베이스:** Supabase
- **인증 방식:** Supabase Auth (이메일 로그인)
- **배포 환경:** Vercel (예정)

## 2. 페이지 및 컴포넌트 구조

### **1) 고객 페이지 (User)**
#### **1-1) 로그인 페이지**
- **파일 위치:** `app/login/page.tsx`
- **기능**:
  - 이메일 및 비밀번호 입력 폼
  - 로그인 상태 유지 옵션
  - 비밀번호 찾기 링크
  - 로그인 후 대시보드로 리다이렉트
- **구현 상태:** 완료 (인증 로직 미구현)

#### **1-2) 대시보드 메인**
- **파일 위치:** `app/dashboard/page.tsx`
- **기능**:
  - 카드 형태의 메뉴 네비게이션
  - 월간리포트, 연체정보, 리밸런싱 히스토리, 관리자 상담 내역 메뉴
  - 최근 알림 섹션
  - 각 기능별 링크 제공
- **사용 컴포넌트:**
  - `Link` (Next.js)
  - Lucide React 아이콘
- **구현 상태:** 완료

#### **1-3) 월간리포트 페이지**
- **파일 위치:** `app/dashboard/monthly-report/page.tsx`
- **기능**:
  - 계좌 정보 카드 (계좌번호, 대표 MP, 전월/현재 잔고)
  - 월간 투자 코멘트 카드
  - 잔고 변화 그래프
  - 포트폴리오 리포트 표시 및 모달 확대 기능
- **사용 컴포넌트:**
  - `ChartWrapper`
  - `PortfolioReportWrapper`
- **구현 상태:** 완료

### **2) 관리자 페이지 (Admin)**
#### **2-1) 관리자 대시보드**
- **파일 위치:** `app/admin/page.tsx`
- **기능**:
  - 카드 형태의 관리 항목 네비게이션
  - 월간리포트 관리, 연체정보 관리, 리밸런싱 히스토리 관리, 상담 내역 관리, 알림 관리 메뉴
  - 각 관리 기능으로의 링크 제공
  - 관리 항목별 간략한 설명 제공
- **사용 컴포넌트:**
  - `Link` (Next.js)
  - Lucide React 아이콘
- **구현 상태:** 완료

#### **2-2) 월간리포트 관리**
- **파일 위치:** `app/admin/monthly-report/page.tsx`
- **기능**:
  - 월 선택 드롭다운
  - 고객 리스트 엑셀 업로드 (드래그 앤 드롭)
  - 포트폴리오 자료(JPG) 업로드 (드래그 앤 드롭, 다중 파일)
  - 월간 코멘트 작성 텍스트 에디터
  - 저장 기능
- **구현 상태:** 완료 (Supabase 연동 미구현)

#### **2-3) 상담 내역 관리**
- **파일 위치:** `app/admin/consultation/page.tsx`
- **기능**:
  - 상담 내역 목록 테이블
  - 검색 및 필터링 기능
  - 상담 내역 추가/수정/삭제 기능
  - 폼 기반의 상담 내역 입력 UI
- **구현 상태:** 완료 (Supabase 연동 미구현)

#### **2-4) 알림 관리**
- **파일 위치:** `app/admin/notifications/page.tsx`
- **기능**:
  - 알림 목록 테이블
  - 활성/비활성 상태 토글 기능
  - 알림 추가/수정/삭제 기능
  - 날짜 기반 정렬 기능
- **구현 상태:** 완료 (Supabase 연동 미구현)

### **3) 공통 컴포넌트**
#### **3-1) 차트 컴포넌트**
- **파일 위치:** `components/ui/chart.tsx`
- **기능**:
  - Recharts를 사용한 잔고 변화 시각화
  - 애니메이션 효과 적용
  - 커스텀 툴팁으로 상세 정보 표시
  - 반응형 디자인 지원
- **구현 상태:** 완료

#### **3-2) 차트 래퍼 컴포넌트**
- **파일 위치:** `components/chart-wrapper.tsx`
- **기능**:
  - 차트 컴포넌트를 클라이언트 컴포넌트로 래핑
  - 서버 컴포넌트와 클라이언트 컴포넌트 간의 호환성 제공
- **구현 상태:** 완료

#### **3-3) 포트폴리오 리포트 컴포넌트**
- **파일 위치:** `components/portfolio-report.tsx`
- **기능**:
  - 포트폴리오 리포트 이미지 표시
  - 전체 화면 모달 기능
  - 이미지 확대/축소 기능 (예정)
- **구현 상태:** 완료

#### **3-4) 포트폴리오 리포트 래퍼 컴포넌트**
- **파일 위치:** `components/portfolio-report-wrapper.tsx`
- **기능**:
  - 포트폴리오 리포트 컴포넌트를 클라이언트 컴포넌트로 래핑
  - 서버 컴포넌트와 클라이언트 컴포넌트 간의 호환성 제공
- **구현 상태:** 완료

## 3. 데이터 모델 및 API 연동

### **1) 사용자 데이터**
- **테이블명:** `users`
- **주요 필드:**
  - `id`: 사용자 고유 ID
  - `email`: 이메일 주소
  - `name`: 사용자 이름
  - `account_number`: 계좌번호
  - `portfolio_type`: 포트폴리오 유형
- **API 엔드포인트:** `/api/users`
- **구현 상태:** 계획됨

### **2) 잔고 데이터**
- **테이블명:** `balances`
- **주요 필드:**
  - `id`: 데이터 고유 ID
  - `user_id`: 사용자 ID (외래 키)
  - `date`: 날짜
  - `amount`: 잔고 금액
  - `previous_amount`: 전월 잔고 금액
- **API 엔드포인트:** `/api/balances`
- **구현 상태:** 계획됨

### **3) 월간 코멘트 데이터**
- **테이블명:** `monthly_comments`
- **주요 필드:**
  - `id`: 코멘트 고유 ID
  - `month`: 해당 월 (YYYY-MM 형식)
  - `content`: 코멘트 내용
  - `created_at`: 생성 일시
- **API 엔드포인트:** `/api/monthly-comments`
- **구현 상태:** 계획됨

### **4) 포트폴리오 리포트 데이터**
- **테이블명:** `portfolio_reports`
- **주요 필드:**
  - `id`: 리포트 고유 ID
  - `portfolio_type`: 포트폴리오 유형
  - `month`: 해당 월 (YYYY-MM 형식)
  - `file_url`: 파일 URL (Supabase Storage)
- **API 엔드포인트:** `/api/portfolio-reports`
- **구현 상태:** 계획됨

### **5) 상담 내역 데이터**
- **테이블명:** `consultations`
- **주요 필드:**
  - `id`: 상담 내역 고유 ID
  - `user_id`: 사용자 ID (외래 키)
  - `title`: 제목
  - `content`: 내용
  - `date`: 상담 일자
  - `created_at`: 생성 일시
- **API 엔드포인트:** `/api/consultations`
- **구현 상태:** 계획됨

### **6) 알림 데이터**
- **테이블명:** `notifications`
- **주요 필드:**
  - `id`: 알림 고유 ID
  - `title`: 제목
  - `content`: 내용
  - `date`: 알림 일자
  - `is_active`: 활성 상태
- **API 엔드포인트:** `/api/notifications`
- **구현 상태:** 계획됨

## 4. 상태 관리 및 데이터 흐름

### **1) 클라이언트 상태 관리**
- **사용 기술:** React Hooks (useState, useEffect)
- **주요 상태:**
  - 폼 입력 상태
  - UI 상태 (모달 표시 여부, 로딩 상태 등)
  - 클라이언트 측 필터링 및 정렬 상태

### **2) 서버 상태 관리**
- **사용 기술:** Next.js Server Components, Supabase
- **주요 상태:**
  - 사용자 인증 상태
  - 데이터베이스 데이터
  - 파일 스토리지 데이터

### **3) 데이터 흐름**
- **인증 흐름:**
  ```
  로그인 폼 → Supabase Auth → 인증 성공 → 대시보드 리다이렉트
  ```

- **데이터 조회 흐름:**
  ```
  페이지 로드 → API Routes → Supabase 쿼리 → 데이터 반환 → UI 렌더링
  ```

- **데이터 생성/수정 흐름:**
  ```
  폼 제출 → API Routes → Supabase 쿼리 → 결과 반환 → UI 업데이트
  ```

- **파일 업로드 흐름:**
  ```
  파일 선택 → API Routes → Supabase Storage → 파일 URL 반환 → 데이터베이스 저장
  ```

## 5. 성능 최적화 전략

### **1) 코드 분할 및 지연 로딩**
- **구현 방법:**
  - Next.js의 dynamic import 활용
  - 대용량 컴포넌트(차트, 이미지 뷰어 등)의 지연 로딩
  - 페이지 단위 코드 분할

### **2) 이미지 최적화**
- **구현 방법:**
  - Next.js의 Image 컴포넌트 활용
  - 적절한 이미지 포맷 및 크기 사용
  - 이미지 지연 로딩

### **3) 서버 컴포넌트 활용**
- **구현 방법:**
  - 데이터 조회 로직을 서버 컴포넌트로 이동
  - 클라이언트 컴포넌트 최소화
  - 서버 컴포넌트와 클라이언트 컴포넌트의 적절한 분리

### **4) 메모이제이션**
- **구현 방법:**
  - React.memo, useMemo, useCallback 활용
  - 불필요한 리렌더링 방지
  - 계산 비용이 높은 연산 캐싱

## 6. 테스트 항목

### **1) 사용자 인터페이스 테스트**
- [ ] 모든 페이지가 다양한 화면 크기에서 올바르게 렌더링되는지 확인
- [ ] 모든 인터랙션(버튼 클릭, 폼 제출 등)이 예상대로 작동하는지 확인
- [ ] 모달, 드롭다운 등의 UI 요소가 올바르게 표시되고 닫히는지 확인
- [ ] 애니메이션 및 전환 효과가 부드럽게 작동하는지 확인

### **2) 기능 테스트**
- [ ] 로그인 및 인증 기능이 올바르게 작동하는지 확인
- [ ] 데이터 조회, 생성, 수정, 삭제 기능이 예상대로 작동하는지 확인
- [ ] 파일 업로드 및 다운로드 기능이 올바르게 작동하는지 확인
- [ ] 차트 및 데이터 시각화가 정확하게 표시되는지 확인

### **3) 성능 테스트**
- [ ] 페이지 로드 시간이 허용 가능한 범위 내인지 확인
- [ ] 대용량 데이터 처리 시 성능 저하가 없는지 확인
- [ ] 메모리 누수가 없는지 확인
- [ ] 네트워크 요청이 최적화되어 있는지 확인

### **4) 접근성 테스트**
- [ ] 모든 인터랙티브 요소에 적절한 ARIA 속성이 적용되어 있는지 확인
- [ ] 키보드 네비게이션이 올바르게 작동하는지 확인
- [ ] 색상 대비가 WCAG 가이드라인을 준수하는지 확인
- [ ] 스크린 리더 호환성 확인

## 7. 배포 및 유지보수 계획

### **1) 배포 환경**
- **플랫폼:** Vercel
- **배포 방식:** GitHub 연동 자동 배포
- **환경 구성:**
  - 개발 환경 (Development)
  - 스테이징 환경 (Staging)
  - 프로덕션 환경 (Production)

### **2) CI/CD 파이프라인**
- **구성 요소:**
  - GitHub Actions를 활용한 자동화된 테스트
  - 코드 품질 검사 (ESLint, Prettier)
  - 자동 배포 (Vercel)

### **3) 모니터링 및 로깅**
- **도구:**
  - Vercel Analytics
  - Sentry (에러 모니터링)
  - Google Analytics (사용자 행동 분석)

### **4) 유지보수 계획**
- **정기 업데이트:**
  - 월 1회 정기 업데이트
  - 보안 패치 및 버그 수정
  - 성능 최적화
- **기능 개선:**
  - 사용자 피드백 기반 기능 개선
  - 새로운 기능 추가
  - UI/UX 개선

---

이 문서는 투자 관리 대시보드 프로젝트의 프론트엔드 개발 가이드라인을 제공합니다. 프로젝트 진행 상황에 따라 지속적으로 업데이트될 예정입니다.

